name: CI/CD - Frontend

on:
  push:
    branches: [main, develop]
    tags:
      - 'v[0-9]+.[0-9]+.[0-9]+'
  pull_request:
    branches: [main, develop]
  workflow_dispatch:

permissions:
  contents: read
  packages: write
  security-events: write
  actions: read
  deployments: write

jobs:
  ci-cd:
    name: CI/CD Pipeline
    uses: ./.github/workflows/reusable-nodejs-cicd.yml
    with:
      service_name: frontend
      node_version: '22'
      working_directory: applications/frontend
      run_tests: true
      test_needs_postgres: false
      test_needs_redis: false
      enable_security_scan: true
      deployment_port: 80
    secrets: inherit
